{"ast":null,"code":"import _defineProperty from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";// import items from \"./data\";\nimport Client from\"./Contentful\";var RoomContext=React.createContext();var RoomProvider=/*#__PURE__*/function(_Component){_inherits(RoomProvider,_Component);function RoomProvider(){var _getPrototypeOf2;var _this;_classCallCheck(this,RoomProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RoomProvider)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={rooms:[],sortedRooms:[],featuredRooms:[],loading:true,type:\"all\",capacity:1,price:0,minPrice:0,maxPrice:0,minSize:0,maxSize:0,breakfast:false,pets:false};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,rooms,featuredRooms,maxPrice,maxSize;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Client.getEntries({content_type:\"restaurant\",order:'-sys.createdAt'// order: 'fields.price'\n});case 3:response=_context.sent;console.log(response);rooms=_this.formatData(response.items);featuredRooms=rooms.filter(function(room){return room.featured===true;});maxPrice=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.price;})));maxSize=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.size;})));_this.setState({rooms:rooms,featuredRooms:featuredRooms,sortedRooms:rooms,loading:false,//\nprice:maxPrice,maxPrice:maxPrice,maxSize:maxSize});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));_this.getRoom=function(slug){var tempRooms=_toConsumableArray(_this.state.rooms);var room=tempRooms.find(function(room){return room.slug===slug;});return room;};_this.handleChange=function(event){var target=event.target;var value=target.type===\"checkbox\"?target.checked:target.value;var name=target.name;console.log(name,value);_this.setState(_defineProperty({},name,value),_this.filterRooms);};_this.filterRooms=function(){var _this$state=_this.state,rooms=_this$state.rooms,type=_this$state.type,capacity=_this$state.capacity,price=_this$state.price,minSize=_this$state.minSize,maxSize=_this$state.maxSize,breakfast=_this$state.breakfast,pets=_this$state.pets;var tempRooms=_toConsumableArray(rooms);// transform values\n// get capacity\ncapacity=parseInt(capacity);price=parseInt(price);// filter by type\nif(type!==\"all\"){tempRooms=tempRooms.filter(function(room){return room.type===type;});}// filter by capacity\nif(capacity!==1){tempRooms=tempRooms.filter(function(room){return room.capacity>=capacity;});}// filter by price\ntempRooms=tempRooms.filter(function(room){return room.price<=price;});//filter by size\ntempRooms=tempRooms.filter(function(room){return room.size>=minSize&&room.size<=maxSize;});//filter by breakfast\nif(breakfast){tempRooms=tempRooms.filter(function(room){return room.breakfast===true;});}//filter by pets\nif(pets){tempRooms=tempRooms.filter(function(room){return room.pets===true;});}_this.setState({sortedRooms:tempRooms});};return _this;}_createClass(RoomProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();// Local\n// let rooms = this.formatData(items);\n// let featuredRooms = rooms.filter(room => room.featured === true);\n// let maxPrice = Math.max(...rooms.map(item => item.price));\n// let maxSize = Math.max(...rooms.map(item => item.size));\n// this.setState({\n//   rooms,\n//   featuredRooms,\n//   sortedRooms: rooms,\n//   loading: false,\n//   price: maxPrice,\n//   maxPrice,\n//   maxSize\n// });\n}},{key:\"formatData\",value:function formatData(items){var tempItems=items.map(function(item){var id=item.sys.id;var images=item.fields.images.map(function(image){return image.fields.file.url;});// console.log('https:' + images)\nvar room=_objectSpread({},item.fields,{images:images,id:id});// console.log(room);  \nreturn room;});return tempItems;}},{key:\"render\",value:function render(){return React.createElement(RoomContext.Provider,{value:_objectSpread({},this.state,{getRoom:this.getRoom,handleChange:this.handleChange})},this.props.children);}}]);return RoomProvider;}(Component);export{RoomProvider as default};var RoomConsumer=RoomContext.Consumer;export{RoomProvider,RoomConsumer,RoomContext};export function withRoomConsumer(Component){return function ConsumerWrapper(props){return React.createElement(RoomConsumer,null,function(value){return React.createElement(Component,Object.assign({},props,{context:value}));});};}","map":{"version":3,"sources":["/Volumes/CustomDrive/Coding/PROJECTS/GITHUB/Restaurant-ReactApp/src/context.js"],"names":["React","Component","Client","RoomContext","createContext","RoomProvider","state","rooms","sortedRooms","featuredRooms","loading","type","capacity","price","minPrice","maxPrice","minSize","maxSize","breakfast","pets","getData","getEntries","content_type","order","response","console","log","formatData","items","filter","room","featured","Math","max","map","item","size","setState","getRoom","slug","tempRooms","find","handleChange","event","target","value","checked","name","filterRooms","parseInt","tempItems","id","sys","images","fields","image","file","url","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n// import items from \"./data\";\nimport Client from \"./Contentful\";\nconst RoomContext = React.createContext();\n\nexport default class RoomProvider extends Component {\n  state = {\n    rooms: [],\n    sortedRooms: [],\n    featuredRooms: [],\n    loading: true,\n    type: \"all\",\n    capacity: 1,\n    price: 0,\n    minPrice: 0,\n    maxPrice: 0,\n    minSize: 0,\n    maxSize: 0,\n    breakfast: false,\n    pets: false\n  };\n\n// getData\n  getData = async () => {\n    try {\n      let response = await Client.getEntries({\n        content_type: \"restaurant\",\n        order: '-sys.createdAt'\n        // order: 'fields.price'\n      });\n      console.log(response);\n\n      let rooms = this.formatData(response.items);\n      let featuredRooms = rooms.filter(room => room.featured === true);\n      \n      let maxPrice = Math.max(...rooms.map(item => item.price));\n      let maxSize = Math.max(...rooms.map(item => item.size));\n      this.setState({\n        rooms,\n        featuredRooms,\n        sortedRooms: rooms,\n        loading: false,\n        //\n        price: maxPrice,\n        maxPrice,\n        maxSize\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  componentDidMount() {\n    this.getData();\n    \n    \n    // Local\n    // let rooms = this.formatData(items);\n    // let featuredRooms = rooms.filter(room => room.featured === true);\n\n    // let maxPrice = Math.max(...rooms.map(item => item.price));\n    // let maxSize = Math.max(...rooms.map(item => item.size));\n    // this.setState({\n    //   rooms,\n    //   featuredRooms,\n    //   sortedRooms: rooms,\n    //   loading: false,\n    //   price: maxPrice,\n    //   maxPrice,\n    //   maxSize\n    // });\n  }\n\n  formatData(items) {\n    let tempItems = items.map(item => {\n  \n      let id = item.sys.id;\n      let images = item.fields.images.map(image => image.fields.file.url);\n      \n      // console.log('https:' + images)\n      let room = { ...item.fields,images,id };\n      // console.log(room);  \n      return room;\n    });\n    return tempItems;\n  }\n  getRoom = slug => {\n    let tempRooms = [...this.state.rooms];\n    const room = tempRooms.find(room => room.slug === slug);\n    return room;\n  };\n  handleChange = event => {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n    console.log(name, value);\n\n    this.setState(\n      {\n        [name]: value\n      },\n      this.filterRooms\n    );\n  };\n  filterRooms = () => {\n    let {\n      rooms,\n      type,\n      capacity,\n      price,\n      minSize,\n      maxSize,\n      breakfast,\n      pets\n    } = this.state;\n\n    let tempRooms = [...rooms];\n    // transform values\n    // get capacity\n    capacity = parseInt(capacity);\n    price = parseInt(price);\n    // filter by type\n    if (type !== \"all\") {\n      tempRooms = tempRooms.filter(room => room.type === type);\n    }\n    // filter by capacity\n    if (capacity !== 1) {\n      tempRooms = tempRooms.filter(room => room.capacity >= capacity);\n    }\n    // filter by price\n    tempRooms = tempRooms.filter(room => room.price <= price);\n    //filter by size\n    tempRooms = tempRooms.filter(\n      room => room.size >= minSize && room.size <= maxSize\n    );\n    //filter by breakfast\n    if (breakfast) {\n      tempRooms = tempRooms.filter(room => room.breakfast === true);\n    }\n    //filter by pets\n    if (pets) {\n      tempRooms = tempRooms.filter(room => room.pets === true);\n    }\n    this.setState({\n      sortedRooms: tempRooms\n    });\n  };\n  render() {\n    return (\n      <RoomContext.Provider\n        value={{\n          ...this.state,\n          getRoom: this.getRoom,\n          handleChange: this.handleChange\n        }}\n      >\n        {this.props.children}\n      </RoomContext.Provider>\n    );\n  }\n}\nconst RoomConsumer = RoomContext.Consumer;\n\nexport { RoomProvider, RoomConsumer, RoomContext };\n\nexport function withRoomConsumer(Component) {\n  return function ConsumerWrapper(props) {\n    return (\n      <RoomConsumer>\n        {value => <Component {...props} context={value} />}\n      </RoomConsumer>\n    );\n  };\n}\n"]},"metadata":{},"sourceType":"module"}